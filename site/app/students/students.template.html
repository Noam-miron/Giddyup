<div class="panel panel-default">
    <div class="panel-heading">
        {{(['farmAdminHorse','vetrinar','shoeing'].indexOf($ctrl.role)!=-1)?'לקוחות':' תלמידים '}}
    </div>
    <div class="panel-body">
        <a class="btn btn-success btn-xs" ui-sref="student({id:0})">{{(['farmAdminHorse','vetrinar','shoeing'].indexOf($ctrl.role)!=-1)?'לקוח':'תלמיד '}} חדש</a>
        <button ng-click="$ctrl.upload()" class="btn btn-success btn-xs">ייבוא</button>

        <a ng-if="$ctrl.role=='vetrinar' || $ctrl.role=='shoeing' " class="btn btn-primary btn-xs" ng-click="$ctrl.openModal()">בחר חוות כלקוחות</a>
    </div>



    <uib-tabset active="active" class="tab-form-demo">
        <uib-tab ng-if="$ctrl.role!='farmAdminHorse'" active="true" index="0" heading="פעילים - {{$ctrl.activeStudent}}" style="font-weight:bold">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>שם מלא</th>
                        <th>ת.ז.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control" ng-model="$ctrl.filter.FirstName" placeholder="שם פרטי" />
                                <span class="input-group-addon">-</span>
                                <input type="text" class="form-control " ng-model="$ctrl.filter.LastName" placeholder="שם משפחה" />
                                <span class="input-group-addon"></span>
                                <button ng-click="$ctrl.changeStatus(1)" class="form-control btn btn-success btn-xs"> העבר/י מסומנים ללא פעילים ----</button>

                            </div>

                            <!--</div>-->
                        </td>
                    </tr>
                    <tr ng-if="user.Active == 'active'" ng-repeat="user in $ctrl.users | filter:$ctrl.filter | limitTo : 1000 | orderBy:['FirstName','LastName'] ">
                        <td width="5%"><input type="checkbox" ng-model="user.IsSelected" /></td>
                        <td ui-sref="student({id:user.Id})">{{user.FirstName}} {{user.LastName}} <span ng-if="user.Active == 'notActive'">(לא פעיל)</span></td>
                        <td>{{user.Email}}</td>
                    </tr>
                </tbody>
            </table>

        </uib-tab>

        <uib-tab ng-if="$ctrl.role!='farmAdminHorse'" index="1" heading="לא פעילים - {{$ctrl.notActiveStudent}}" style="font-weight:bold">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>שם מלא</th>
                        <th>ת.ז.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control" ng-model="$ctrl.filter.FirstName" placeholder="שם פרטי" />
                                <span class="input-group-addon">-</span>
                                <input type="text" class="form-control " ng-model="$ctrl.filter.LastName" placeholder="שם משפחה" />

                                <span class="input-group-addon"></span>
                                <button ng-click="$ctrl.changeStatus(2)" class="form-control btn btn-success btn-xs"> ----- העבר/י מסומנים לפעילים</button>

                            </div>
                            <!--</div>-->
                        </td>
                    </tr>
                    <tr ng-if="user.Active == 'notActive'" ng-repeat="user in $ctrl.users  | filter:$ctrl.filter  | limitTo : 1000 | orderBy:['FirstName','LastName'] ">
                        <td width="5%"><input type="checkbox" ng-model="user.IsSelected2" /></td>
                        <td ui-sref="student({id:user.Id})">{{user.FirstName}} {{user.LastName}} <span ng-if="user.Active == 'notActive'" style="font-weight:bold;color:red">(לא פעיל)</span></td>
                        <td>{{user.Email}}</td>
                    </tr>
                </tbody>
            </table>
        </uib-tab>

        <uib-tab index="2" ng-if="['vetrinar','shoeing'].indexOf($ctrl.role)==-1" heading="{{($ctrl.role!='farmAdminHorse')?'פנסיון':'לקוחות'}} פעילים - {{$ctrl.pensionStudent}}" style="font-weight:bold">
            <table class="table table-hover">
                <thead>
                    <tr>

                        <th>שם מלא</th>
                        <th>ת.ז.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">
                            <div class="input-group">
                                <input type="text" class="form-control" ng-model="$ctrl.filter.FirstName" placeholder="שם פרטי" />
                                <span class="input-group-addon">-</span>
                                <input type="text" class="form-control " ng-model="$ctrl.filter.LastName" placeholder="שם משפחה" />
                                <span class="input-group-addon"></span>

                            </div>

                            <!--</div>-->
                        </td>
                    </tr>
                    <tr ng-if="user.Style == 'horseHolder' && user.Active != 'notActive'" ng-repeat="user in $ctrl.users | filter:$ctrl.filter | limitTo : 1000 | orderBy:['FirstName','LastName'] ">
                        <td ui-sref="student({id:user.Id})">{{user.FirstName}} {{user.LastName}} <span ng-if="user.Active == 'notActive'" style="font-weight:bold;color:red">(לא פעיל)</span></td>
                        <td>{{user.Email}}</td>
                    </tr>
                </tbody>
            </table>

        </uib-tab>

        <uib-tab index="3" ng-if="['vetrinar','shoeing'].indexOf($ctrl.role)==-1" heading="{{($ctrl.role!='farmAdminHorse')?'פנסיון':'לקוחות'}} לא פעילים - {{$ctrl.pensionStudentNotActive}}" style="font-weight:bold">
            <table class="table table-hover">
                <thead>
                    <tr>

                        <th>שם מלא</th>
                        <th>ת.ז.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">
                            <div class="input-group">
                                <input type="text" class="form-control" ng-model="$ctrl.filter.FirstName" placeholder="שם פרטי" />
                                <span class="input-group-addon">-</span>
                                <input type="text" class="form-control " ng-model="$ctrl.filter.LastName" placeholder="שם משפחה" />
                                <span class="input-group-addon"></span>

                            </div>

                            <!--</div>-->
                        </td>
                    </tr>
                    <tr ng-if="user.Style == 'horseHolder' && user.Active == 'notActive'" ng-repeat="user in $ctrl.users | filter:$ctrl.filter | limitTo : 1000 | orderBy:['FirstName','LastName'] ">
                        <td ui-sref="student({id:user.Id})">{{user.FirstName}} {{user.LastName}} <span ng-if="user.Active == 'notActive'" style="font-weight:bold;color:red">(לא פעיל)</span></td>
                        <td>{{user.Email}}</td>
                    </tr>
                </tbody>
            </table>

        </uib-tab>
    </uib-tabset>
</div>


<div class="modal fade" id="modalHavotstudent" style="z-index:50000" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">בחירת חוות כלקוחות</h4>
            </div>
            <div class="modal-body">


                <table class="table">
                    <thead>
                        <tr>

                            <th>#</th>
                            <th>מס' חווה</th>
                            <th>שם חווה</th>
                            <th></th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="horsevetrinar in $ctrl.horsevetrinars">

                            <td>{{$index + 1}}</td>
                            <td>{{horsevetrinar.FarmIdAdd}}</td>
                            <td>{{$ctrl.getFarmName(horsevetrinar.FarmIdAdd)}}</td>
                            <td>
                                <button type="button" class="btn btn-danger" ng-click="$ctrl.action(1,horsevetrinar)">הסר  </button>
                            </td>




                        </tr>

                        <tr>
                            <td colspan="2">הוסף חווה</td>
                            <td colspan="1">
                                <select class="form-control" ng-options="farm.Id as farm.Name for farm in $ctrl.getFilerArray()" ng-model="$ctrl.newhorsevetrinars.FarmId">
                                    <option value="">בחר חווה</option>
                                </select>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary" ng-disabled="!$ctrl.newhorsevetrinars.FarmId" ng-click="$ctrl.action(2)">הוסף </button>
                            </td>

                        </tr>



                    </tbody>
                </table>


                <div style="text-align:left">


                    <button type="button" class="btn btn-primary" ng-click="$ctrl.action(3)" data-dismiss="modal">שמור</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">ביטול </button>
                </div>
            </div>
        </div>
    </div>
</div>